%head
  = javascript_tag do
    $(document).ready(function(){setInterval(function(){$('#map').load('/maps/#{@map.id}/status', function(response){ if(response !== 'in_progress') {location.reload();} } );}, 3000);});
%body
  .uk-container
    %h3.uk-heading-divider= "Map #{@map.id}: #{@map.title}"
    - if @map.in_progress?
      Map creation is in progress.
      %p#map{style: 'display: none'}
    - if @map.available?
      .uk-grid
        .empty
        .boom
          %img{src: @map.cdn_url, class: 'maps-shadow maps-preview'}
        .map
          %a{href: @map.cdn_url, class: 'button uk-button uk-button-primary uk-width-1-1', target: 'blank'} Download
    - if @map.failed?
      Map creation failed. Please try again!
      .map
        %a{href: root_path, class: 'button uk-button uk-button-primary'} Try again

